(()=>{"use strict";var e,t={255:(e,t,i)=>{i(286);var n=i(460),o=(i(459),i(555),i(561)),s=i(755);const r=o.shape.basic.Rectangle.extend({NAME:"PrincipalLabel",init:function(e){this._super(s.extend({bgColor:"#0b5394",height:"60",width:"120"}),e)},setActor:function(e){return this.label=new o.shape.basic.Label({text:e,color:"#0b5394",fontColor:"#0d0d0d",fontSize:"25"}),this.add(this.label,new o.layout.locator.CenterLocator(this)),this},setActorColor:function(e){return this.setBackgroundColor(e),this.getChildren().first().setColor(e),this},setKnowledgeTab:function(){}}),a=o.layout.locator.PortLocator.extend({NAME:"OutputPrincipalPortLocator",init:function(){this._super()},relocate:function(e,t){var i=t.getParent();this.applyConsiderRotation(t,i.getWidth()/2,i.getHeight())}});var c=i(755);const l=o.shape.basic.Rectangle.extend({NAME:"EndPrincipal",init:function(e){this._super(c.extend({bgColor:"#2c3237",height:"20",width:"150"}),e)}}),d=o.layout.locator.PortLocator.extend({NAME:"InputPrincipalPortLocator",init:function(){this._super()},relocate:function(e,t){this.applyConsiderRotation(t,t.getParent().getWidth()/2,0)}});var g=i(755);const h=o.shape.basic.Rectangle.extend({NAME:"WorkArea",init:function(e,t,i){this._super(g.extend({stroke:1,color:"#ececec"},e),t,i)}}),u=o.Connection.extend({NAME:"TimeLinePrincipal",init:function(e){this._super(e),this.setRouter(new o.layout.connection.InteractiveManhattanConnectionRouter),this.setOutlineStroke(0),this.setOutlineColor("#191919"),this.setStroke(1),this.setColor("#191919")}});var p=i(86),v=i(359),w=i(825),f=i(755);const b=o.Connection.extend({NAME:"MyConnection",init:function(e,t,i){this._super(f.extend({stroke:3,outlineStroke:1,outlineColor:"#303030",color:"#036016"},e),t,i),this.setRouter(new o.layout.connection.SplineConnectionRouter),this.on("removed",((e,t)=>{"draw2d.OutputPort"!==e.getTarget().NAME?e.getTarget().setValue(null):e.getSource().setValue(null)}))}});var m=i(791);Class.extend({NAME:"Application",init:function(){this.parser=new w.Z,this.view=new p.Z("canvas",this.parser),this.view.installEditPolicy(new m.Z({createConnection:function(){return new b}})),this.toolbar=new v.Z("toolbar","submit",this.view)}});var y=i(755);const P=o.policy.figure.SelectionPolicy.extend({NAME:"SelectionMenuPolicy",init:function(e,t,i){this.overlay=null,this._super(e,t,i)},onSelect:function(e,t,i){this._super(e,t,i),null===this.overlay&&(this.overlay=y("<div class='overlayMenu'><i class='iconify ico-overlay' data-icon='mdi:email-plus'  data-align='center' style='color: #242424;'></i></div>"),y(".seqdiagram").append(this.overlay),this.overlay.on("click",(function(){window.open("messageBuilder.html","_blank").focus()}))),this.posOverlay(t)},onUnselect:function(e,t){this._super(e,t),this.overlay.remove(),this.overlay=null},onDrag:function(e,t){this._super(e,t),this.posOverlay(t)},posOverlay:function(e){this.overlay.css({top:e.getAbsoluteY()-20,left:e.getAbsoluteX()+e.getWidth()+20})}});var k=i(755);const L=Class.extend({NAME:"Principal",init:function(e,t){this.knowledgemarks=[],this.name=e,t.on("select",k.proxy(this.onSelectionChanged,this)),this.principalTop=new r,this.principalTop.setActor(e),this.principalTop.createPort("hybrid",new a),this.principalTop.setSelectable(!1),this.principalTop.setDraggable(!1),this.principalEnd=new l,this.principalEnd.createPort("hybrid",new d),this.jail=new h(k.extend({height:t.getHeight(),width:t.getWidth()/4})),this.jail.setBackgroundColor(null),"Alice"==e?(t.add(this.jail,t.getWidth()/4,0),t.add(this.principalTop,t.getWidth()/8*3-60,20),t.add(this.principalEnd,t.getWidth()/8*3-75,t.getHeight()-30)):"Bob"==e?(t.add(this.jail,t.getWidth()/2,0),t.add(this.principalTop,t.getWidth()/8*5-60,20),t.add(this.principalEnd,t.getWidth()/8*5-75,t.getHeight()-30),this.principalTop.setActorColor("#38761d")):"Server"==e?(t.add(this.jail,3*t.getWidth()/4,0),t.add(this.principalTop,t.getWidth()/8*7-60,20),t.add(this.principalEnd,t.getWidth()/8*7-75,t.getHeight()-30),this.principalTop.setActorColor("#a64d79")):(t.add(this.principalTop,t.getWidth()/8*3-60,20),t.add(this.principalEnd,t.getWidth()/8*3-75,t.getHeight()-30),this.principalTop.setActorColor("#cc0000")),this.timeLine=new u({source:this.principalTop.getPorts().first(),target:this.principalEnd.getPorts().first()}),t.add(this.timeLine)},getName:function(){return this.name},getTopX:function(){return this.principalTop.getAbsoluteX()},getTopY:function(){return this.principalTop.getAbsoluteY()},getEndX:function(){return this.principalEnd.getAbsoluteX()},getEndY:function(){return this.principalEnd.getAbsoluteY()},getJailX:function(){return this.jail.getAbsoluteX()},getJailY:function(){return this.jail.getAbsoluteY()},getTimeLineUpX:function(){return this.timeLine.getStartX()},getTimeLineUpY:function(){return this.timeLine.getStartY()},hasIncomingMesssages:function(){return!1},setVisibility:function(e){if(0==e){var t=new o.command.CommandDelete(this.principalTop);canvas.getCommandStack().execute(t);var i=new o.command.CommandDelete(this.principalEnd);canvas.getCommandStack().execute(i);var n=new o.command.CommandDelete(this.jail);canvas.getCommandStack().execute(n)}},translate:function(e){switch(e){case"left":this.principalEnd.translate(-canvas.getWidth()/4,0),this.principalTop.translate(-canvas.getWidth()/4,0),this.jail.translate(-canvas.getWidth()/4,0);for(const e of this.knowledgemarks)e.isSelected()&&e.editPolicy.data[0].onUnselect(),e.uninstallEditPolicy(new o.policy.figure.RegionEditPolicy(e.getAbsoluteX(),e.getAbsoluteY(),e.getWidth(),e.getHeight())),e.translate(-canvas.getWidth()/4,0),e.installEditPolicy(new o.policy.figure.RegionEditPolicy(e.getAbsoluteX(),e.getAbsoluteY(),e.getWidth(),e.getHeight())),e.isSelected()&&e.editPolicy.data[0].onSelect(canvas,e,!0);break;case"right":this.principalEnd.translate(canvas.getWidth()/4,0),this.principalTop.translate(canvas.getWidth()/4,0),this.jail.translate(canvas.getWidth()/4,0);for(const e of this.knowledgemarks)e.uninstallEditPolicy(new o.policy.figure.RegionEditPolicy(e.getAbsoluteX(),e.getAbsoluteY(),e.getWidth(),e.getHeight())),e.translate(canvas.getWidth()/4,0),e.installEditPolicy(new o.policy.figure.RegionEditPolicy(e.getAbsoluteX(),e.getAbsoluteY(),e.getWidth(),e.getHeight()));break;default:console.log(`Sorry, the movement ${expr} is unkwown.`)}},addKnowledgeMark:function(e){this.knowledgemarks.push(e)},lastKnowledgeMark:function(){return this.knowledgemarks[this.knowledgemarks.length-1]},hideTimeLine:function(){this.timeLine.setVisible(!1)}}),C=o.layout.locator.PortLocator.extend({NAME:"LeftPortKnowledgeMark",init:function(){this._super()},relocate:function(e,t){var i=t.getParent(),n=1,o=this.NAME,s=1;i.getPorts().each((function(e,i){s=i===t?n:s,n+=i.getLocator().NAME===o?1:0})),1==s?this.applyConsiderRotation(t,0,0):this.applyConsiderRotation(t,0,i.getHeight())}}),E=o.layout.locator.PortLocator.extend({NAME:"RightPortKnowledgeMark",init:function(){this._super()},relocate:function(e,t){var i=t.getParent(),n=1,o=this.NAME,s=1;i.getPorts().each((function(e,i){s=i===t?n:s,n+=i.getLocator().NAME===o?1:0})),1==s?this.applyConsiderRotation(t,i.getWidth(),0):this.applyConsiderRotation(t,i.getWidth(),i.getHeight())}}),A=o.layout.locator.PortLocator.extend({NAME:"OutputPortKnowledgeMarkInit",init:function(){this._super()},relocate:function(e,t){var i=t.getParent(),n=1,o=this.NAME,s=1;i.getPorts().each((function(e,i){s=i===t?n:s,n+=i.getLocator().NAME===o?1:0})),1==s&&this.applyConsiderRotation(t,i.getWidth(),i.getHeight())}});var M=i(755);const N=o.shape.basic.Rectangle.extend({NAME:"KnowledgeMark",init:function(e,t,i){this._super(M.extend({bgColor:"#5486b4",height:"30",width:"10"}),M.extend({portConfig:this.setPortConfig,sender:this.setSender,receiver:this.setReceiver},t),M.extend({sender:this.getSender,receiver:this.getReceiver,bottomY:this.getBottomY},i),e),this.receiver==this.sender?canvas.add(this,this.receiver.getTimeLineUpX()-5,this.receiver.getTimeLineUpY()+15):canvas.add(this,this.receiver.getTimeLineUpX()-5,this.sender.lastKnowledgeMark().getBottomY()),this.installEditPolicy(new P),this.installEditPolicy(new o.policy.figure.AntSelectionFeedbackPolicy),this.installEditPolicy(new o.policy.figure.RegionEditPolicy(this.getAbsoluteX(),this.getAbsoluteY(),this.getWidth(),this.getHeight()))},setPortConfig:function(e){if(1==e){var t=new A;this.createPort("output",t),this.getPorts().get(0).setVisible(!1)}else if(e%2==0){var i=new C;this.createPort("input",i),this.createPort("output",i),this.getPorts().get(0).setVisible(!1),this.getPorts().get(1).setVisible(!1)}else{var n=new E;this.createPort("input",n),this.createPort("output",n),this.getPorts().get(0).setVisible(!1),this.getPorts().get(1).setVisible(!1)}return this},setSender:function(e){return this.sender=e,this},setReceiver:function(e){return"Alice"==e.getName()?this.setBackgroundColor("#5486b4"):"Bob"==e.getName()?this.setBackgroundColor("#739F60"):"Server"==e.getName()?this.setBackgroundColor("#c082a1"):this.setBackgroundColor("#db4c4c"),this.receiver=e,this},getBottomY:function(){return this.getAbsoluteY()+this.getHeight()}}),S=o.layout.locator.PortLocator.extend({NAME:"LeftPortKnowledgeMarkAtk",init:function(){this._super()},relocate:function(e,t){var i=t.getParent(),n=1,o=this.NAME,s=1;i.getPorts().each((function(e,i){s=i===t?n:s,n+=i.getLocator().NAME===o?1:0})),this.applyConsiderRotation(t,0,i.getHeight()/2)}}),x=o.layout.locator.PortLocator.extend({NAME:"RightPortKnowledgeMarkAtk",init:function(){this._super()},relocate:function(e,t){var i=t.getParent(),n=1,o=this.NAME,s=1;i.getPorts().each((function(e,i){s=i===t?n:s,n+=i.getLocator().NAME===o?1:0})),this.applyConsiderRotation(t,i.getWidth(),i.getHeight()/2)}});var T=i(755);const W=o.shape.basic.Rectangle.extend({NAME:"KnowledgeMarkAtk",init:function(e,t,i){this._super(T.extend({bgColor:"#db4c4c",color:"#cc000",height:"20",width:"10"}),T.extend({messageNumb:this.setMessageNumb},t),i,e)},setMessageNumb:function(e){if(this.messageNumb=e,console.log(e),e%2==0){var t=new S;this.createPort("output",t);var i=new x;this.createPort("input",i)}else t=new x,this.createPort("output",t),i=new S,this.createPort("input",i);return this},onDrop:function(e,t,i,n,s){if(e instanceof o.Connection){let t=e.getSource(),i=e.getTarget(),n=this.getOutputPort(0),s=this.getInputPort(0);t instanceof o.InputPort&&(t=e.getTarget(),i=e.getSource());let r=this.getCanvas().getCommandStack(),a=new o.command.CommandReconnect(e);a.setNewPorts(t,s),r.execute(a);let c=window.createConnection();a=new o.command.CommandConnect(n,i),a.setConnection(c),r.execute(a)}else console.log("not connection")},onRemove:function(){let e=this.getOutputPort(0),t=this.getInputPort(0),i=e.getConnections().get(0),n=t.getConnections().get(0).getSource();window.canvas.remove(t.getConnections().get(0)),window.canvas.remove(this),i.setSource(n)}}),R=o.policy.canvas.DropInterceptorPolicy.extend({NAME:"InterceptorPolicy",init:function(e,t,i){this._super(e,t,i)},delegateTarget:function(e,t){return e instanceof W&&t instanceof o.Connection?t:this._super(e,t)}});var _=i(755);window.nTrip=1,window.canvas=null,window.alice=null,window.bob=null,window.server=null,window.attacker=null,window.createConnection=function(e,t){var i=new o.decoration.connection.ArrowDecorator;i.setDimension(15,12),i.setBackgroundColor("#191919");var n=new o.Connection({router:new o.layout.connection.InteractiveManhattanConnectionRouter,targetDecorator:i,stroke:2,color:"#191919",radius:10,outlineColor:"#191919",source:e,target:t});return n.on("dragEnter",(function(e,t){n.attr({outlineStroke:2})})),n.on("dragLeave",(function(e,t){n.attr({outlineStroke:0})})),n},_(document.addEventListener("DOMContentLoaded",(function(){window.canvas=new o.Canvas("gfx_holder"),window.canvas.uninstallEditPolicy(new o.policy.canvas.BoundingboxSelectionPolicy),window.canvas.installEditPolicy(new o.policy.canvas.SingleSelectionPolicy),window.canvas.installEditPolicy(new o.policy.canvas.CoronaDecorationPolicy),window.canvas.installEditPolicy(new o.policy.connection.DragConnectionCreatePolicy({createConnection})),window.canvas.installEditPolicy(new R),window.alice=new L("Alice",window.canvas),window.bob=new L("Bob",window.canvas);let e=new N(_.extend({portConfig:nTrip,sender:window.alice,receiver:window.alice}));e.getPorts().get(0).setVisible(!0),window.alice.addKnowledgeMark(e),window.nTrip=2;let t=new N(_.extend({portConfig:nTrip,sender:window.alice,receiver:window.bob}));t.getPorts().get(0).setVisible(!0),t.getPorts().get(1).setVisible(!0),window.bob.addKnowledgeMark(t);var i=createConnection(e.getPorts().get(0),t.getPorts().get(0));window.canvas.add(i),window.nTrip=3;let n=new N(_.extend({portConfig:nTrip,sender:window.bob,receiver:window.alice}));n.getPorts().get(0).setVisible(!0),n.getPorts().get(1).setVisible(!0),window.alice.addKnowledgeMark(n);var s=createConnection(t.getPorts().get(1),n.getPorts().get(0));window.canvas.add(s)})));var O=i(755),Y=i(755);(0,n.k)({tooltip:!0,popover:!0,toasts:!0}),window.$=O,window.jQuery=O;const X=document.querySelectorAll(".arrow");for(var j=0;j<X.length;j++)X[j].addEventListener("click",(e=>{e.target.parentElement.parentElement.parentElement.classList.toggle("showMenu")}));const H=document.querySelector(".sidebar"),V=document.querySelector(".sender-btn"),B=document.querySelector(".receiver-btn"),K=document.querySelector(".attacker-btn"),D=document.querySelector(".server-btn");var I=0;V.addEventListener("click",(()=>{var e=Y(event.currentTarget);e.clicks=(e.clicks||0)+1,0!=I?(I=0,e.clicks=0,V.childNodes[1].classList.toggle("active"),B.childNodes[1].classList.remove("active"),K.childNodes[1].classList.remove("active"),D.childNodes[1].classList.remove("active"),H.classList.toggle("senderdb"),H.classList.remove("receiverdb"),H.classList.remove("attackerdb"),H.classList.remove("serverdb")):H.classList.toggle("close")})),B.addEventListener("click",(()=>{var e=Y(event.currentTarget);e.clicks=(e.clicks||0)+1,1!=I?(I=1,e.clicks=0,console.log(V.childNodes[1]),V.childNodes[1].classList.remove("active"),B.childNodes[1].classList.toggle("active"),K.childNodes[1].classList.remove("active"),D.childNodes[1].classList.remove("active"),H.classList.remove("senderdb"),H.classList.toggle("receiverdb"),H.classList.remove("attackerdb"),H.classList.remove("serverdb")):H.classList.toggle("close")})),K.addEventListener("click",(()=>{var e=Y(event.currentTarget);e.clicks=(e.clicks||0)+1,2!=I?(I=2,e.clicks=0,V.childNodes[1].classList.remove("active"),B.childNodes[1].classList.remove("active"),K.childNodes[1].classList.toggle("active"),D.childNodes[1].classList.remove("active"),H.classList.remove("senderdb"),H.classList.remove("receiverdb"),H.classList.toggle("attackerdb"),H.classList.remove("serverdb")):H.classList.toggle("close")})),D.addEventListener("click",(()=>{var e=Y(event.currentTarget);e.clicks=(e.clicks||0)+1,3!=I?(I=3,e.clicks=0,V.childNodes[1].classList.remove("active"),B.childNodes[1].classList.remove("active"),K.childNodes[1].classList.remove("active"),D.childNodes[1].classList.toggle("active"),H.classList.remove("senderdb"),H.classList.remove("receiverdb"),H.classList.remove("attackerdb"),H.classList.toggle("serverdb")):H.classList.toggle("close")})),document.querySelector("#checkbox1").addEventListener("change",(function(){this.checked?(D.style.visibility="visible",window.server=new L("Server",window.canvas)):0==window.server.hasIncomingMesssages()&&(D.style.visibility="hidden",window.server.setVisibility(!1))})),document.querySelector("#checkbox2").addEventListener("change",(function(){if(this.checked){window.alice.translate("left"),window.attacker=new L("Attacker",window.canvas);var e=window.canvas.getLines().clone(),t=1;for(let n=0;n<e.getSize();n++){var i=e.get(n);if("TimeLinePrincipal"!=i.NAME){console.log("MAIN"),console.log(t);let e=new W(Y.extend({messageNumb:t}));window.canvas.add(e,window.attacker.getTimeLineUpX()-5,i.getStartY()-10),e.onDrop(i,e.getAbsoluteX(),e.getAbsoluteY(),!1,!1),t+=1}}}else{window.attacker.setVisibility(!1);var n=window.canvas.getFigures().clone();for(let e=0;e<n.getSize();e++)i=n.get(e),"KnowledgeMarkAtk"==i.NAME&&i.onRemove();window.alice.translate("right")}}))}},i={};function n(e){var o=i[e];if(void 0!==o)return o.exports;var s=i[e]={exports:{}};return t[e].call(s.exports,s,s.exports,n),s.exports}n.m=t,e=[],n.O=(t,i,o,s)=>{if(!i){var r=1/0;for(d=0;d<e.length;d++){for(var[i,o,s]=e[d],a=!0,c=0;c<i.length;c++)(!1&s||r>=s)&&Object.keys(n.O).every((e=>n.O[e](i[c])))?i.splice(c--,1):(a=!1,s<r&&(r=s));if(a){e.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[i,o,s]},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,i)=>{var o,s,[r,a,c]=i,l=0;if(r.some((t=>0!==e[t]))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(c)var d=c(n)}for(t&&t(i);l<r.length;l++)s=r[l],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(d)},i=self.webpackChunkaprover_site=self.webpackChunkaprover_site||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var o=n.O(void 0,[217,906],(()=>n(255)));o=n.O(o)})();
//# sourceMappingURL=main.js.map